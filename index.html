<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MySQL Data Display and Export</title>
    <!-- Link to the external CSS file -->
    <link rel="stylesheet" href="main.css">
    <style>
        /* Add some basic styling for the sort indicator */
        .sortable-header {
            cursor: pointer;
            position: relative;
            padding-right: 20px; /* Make space for the arrow */
        }
        .sort-indicator {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8em;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <object type="text/html" data="header.html" style="width:100%;border: none;"></object>

    <div class="container">
        <h1>Read Data from MySQL Database</h1>
        <div class="search-controls" style="margin-bottom: 20px; text-align: center;">
            <label for="startDate">Start Date (YYYY-MM-DD):</label> <!-- Changed label and id -->
            <input type="date" id="startDate" name="startDate"> <!-- Changed id and name -->
            <label for="startTime" style="margin-left: 10px;">Start Time:</label>
            <input type="time" id="startTime" name="startTime">

            <label for="endDate" style="margin-left: 10px;">End Date (YYYY-MM-DD):</label> <!-- New label and input -->
            <input type="date" id="endDate" name="endDate"> <!-- New input -->
            <label for="endTime" style="margin-left: 10px;">End Time:</label>
            <input type="time" id="endTime" name="endTime">
            <button id="searchBtn" style="margin-left: 10px;">Search</button>
            <button id="clearSearchBtn" style="margin-left: 10px;">Clear Search</button>
        </div>
        <div class="table-responsive">
            <table id="dataTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Pump ID</th> <!-- 新增列 -->
                        <!-- Add class and ID for click handling, and a span for the indicator -->
                        <th id="datetimeHeader" class="sortable-header">
                            Datetime Insert <span class="sort-indicator"></span>
                        </th>
                        <th>Va</th>
                        <th>Vb</th>
                        <th>Vc</th>
                        <th>Ia</th>
                        <th>Ib</th>
                        <th>Ic</th>
                        <th>Pres1</th>
                        <th>Pres2</th>
                        <th>Pres3</th>
                        <th>Vibx</th>
                        <th>Viby</th>
                        <th>Vibz</th>
                        <th>Energy Consumption</th> <!-- Changed from Pt to Energy Consumption -->
                        <th>Temperature</th> <!-- 新增列 -->
                        <th>Power</th> <!-- 新增列 -->
                    </tr>
                </thead>
                <tbody>
                    <!-- Data will be loaded by JavaScript here -->
                    <tr><td colspan="18" class="loading-message">Loading data...</td></tr> <!-- 添加 class="loading-message" 并移除 style -->
                </tbody>
            </table>
        </div>

        <div class="pagination-controls">
            <button id="prevPageBtn">&lt; Previous</button>
            <span id="pageInfo">Page 1</span>
            <button id="nextPageBtn">Next &gt;</button>

            <span>Go to page:</span>
            <input type="number" id="pageNumberInput" value="1" min="1">
            <button id="goToPageBtn">Go</button>
        </div>
        <div class="button-container">
            <button id="exportCsvBtn">Export to CSV</button>
        </div>
    </div>

    <!-- Footer -->
    <object type="text/html" data="footer.html" style="width:100%; height:120px; border: none;"></object>

    <!-- Introduce your JavaScript file -->
    <script src="app.js"></script>
</body>
</html>
